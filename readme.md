## 1.实验目的

### 1.1 实验要求

物流公司在流通过程中，需要将打包完毕的箱子装入到一个货车的车厢中，为了提高物流效率，需要将车厢尽量填满，显然，车厢如果能被100%填满是最优的，但通常认为，车厢能够填满85%，可认为装箱是比较优化的。

设车厢为长方形，其长宽高分别为$L,W,H$；共有$n$个箱子，箱子也为长方形，第$i$个箱子的长宽高为$l_i$,$w_i$,$h_i$（$n$个箱子的体积总和是要远远大于车厢的体积），做以下假设和要求：

1.长方形的车厢共有8个角，并设靠近驾驶室并位于下端的一个角的坐标为（0,0,0），车厢共6个面，其中长的4个面，以及靠近驾驶室的面是封闭的，只有一个面是开着的，用于工人搬运箱子；

2.需要计算出每个箱子在车厢中的坐标，即每个箱子摆放后，其和车厢坐标为（0,0,0）的角相对应的角在车厢中的坐标，并计算车厢的填充率。

<div style="page-break-after:always;"></div>

---

## 2.实验内容

### 2.1 算法思想

本次大作业采用暴力算法求解，基本思想是通过循环暴力搜索车厢的三维空间，如果搜索的位置有空位置可以放下当前箱子，则把当前箱子放下；如果搜索的位置不足以放下当前箱子或者已经有箱子占据，则继续搜索直到找到可以放下当前箱子的位置，若搜索结束都没有放下该箱子，则认为该车厢放不下此箱子。这样循环直到处理完所有的箱子，算法到此结束。

### 2.2 代码优化

如果单纯的使用三重循环暴力求解，求解效率太低，耗费时间过大，因此需要对代码做出一定的优化，优化方法主要有以下两点：

1）由于老师给的箱子大部分是重复的，在实际运行过程中可能会出现两个尺寸相同的箱子，前面的箱子通过检测已经找不到位置摆放了，后面的箱子还会再进行一遍检测，从而浪费时间。

因此可以在每次进入循环前加入一个判断，如果本箱子与前一个箱子的尺寸相同，且前一个箱子的mark标记为0，即没有摆放进车厢，就可以直接丢弃该箱子，进行下一个箱子的检测。

```python
if (boxes[i][0] == boxes[i - 1][0] and boxes[i][1] == boxes[i - 1][1] and boxes[i][2] == boxes[i - 1][2] and mark[i - 1] == 0):
```

2）在之前对车厢的空间进行搜索时，每次都是从车厢的原点开始搜索，但开始的位置显然已经被箱子占据了，再去搜索其实就是浪费时间，因此我们记录下上一个箱子的摆放位置，在原先摆放位置的基础之上向x轴平移上一个箱子长的长度，以该点作为本箱子找寻空位find_position的起点，从而减少不必要的搜寻。

```python
l_last, w_last, h_last = p + boxes[i][1], q, r
```

<div style="page-break-after:always;"></div>

# 3.实验结果

通过对五种情况，每种情况五组数据一共25组数据进行运算，可以得到每组数据的车厢填充率，以及每个箱子放置的坐标（以摆放位置的左下角为基准）。

<center>表1:车厢填充率表</center>

| 组数 | 使用容量 |  总容量  | 填充率 |
| :--: | :------: | :------: | :----: |
| E1-1 | 22350810 | 30089620 | 74.28% |
| E1-2 | 24093486 | 30089620 | 80.07% |
| E1-3 | 24093486 | 30089620 | 80.07% |
| E1-4 | 24363960 | 30089620 | 80.97% |
| E1-5 | 24838120 | 30089620 | 82.55% |
| E2-1 | 23008142 | 30089620 | 76.47% |
| E2-2 | 26982504 | 30089620 | 89.67% |
| E2-3 | 23193492 | 30089620 | 77.08% |
| E2-4 | 24381888 | 30089620 | 81.03% |
| E2-5 | 25442846 | 30089620 | 84.56% |
| E3-1 | 21356838 | 30089620 | 70.98% |
| E3-2 | 22973566 | 30089620 | 76.35% |
| E3-3 | 24123996 | 30089620 | 80.17% |
| E3-4 | 27511758 | 30089620 | 91.43% |
| E3-5 | 25051065 | 30089620 | 83.25% |
| E4-1 | 25561447 | 30089620 | 84.95% |
| E4-2 | 24091208 | 30089620 | 80.06% |
| E4-3 | 23535938 | 30089620 | 78.22% |
| E4-4 | 25645766 | 30089620 | 85.23% |
| E4-5 | 24195928 | 30089620 | 80.41% |
| E5-1 | 25690485 | 30089620 | 85.38% |
| E5-2 | 23329391 | 30089620 | 77.53% |
| E5-3 | 23842966 | 30089620 | 79.24% |
| E5-4 | 22489001 | 30089620 | 74.74% |
| E5-5 | 24077783 | 30089620 | 80.02% |



# 4.说明

level_main3.py文件为主程序，运行该代码即可得到结果；level_a_test3文件为实现主要功能的代码

